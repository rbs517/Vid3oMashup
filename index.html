<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - blender -json</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/88/three.js"></script>
        <style>
            body {
                background:#777;
                padding:0;
                margin:0;
                font-weight: bold;
                overflow:hidden;
            }
        </style>
    </head>
    <body>
        <script>
            var container, mixer, geometry, material, toilette2;
            var camera, scene, renderer;
            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;
            var mouseX =0;
            var mouseY =0;
            var toilette = [];
            init();
            animate();

            function init() {
                container = document.createElement( 'div' );
                document.body.appendChild( container );
                camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000  );
            
                //set the x, y, z positions of the camera
                camera.position.set( 2, 4, 5 );
                // camera.position.z = 1000;
                //camera.position.x = 2;
                scene = new THREE.Scene();
                // scene.background = new THREE.color(0xff6600)
               //scene.fog = new THREE.FogExp2( 0x000000, 0.035 );
                //mixer = new THREE.AnimationMixer( scene );
                geometry = new THREE.Geometry();
                
                // instantiate a loader
                var loader = new THREE.JSONLoader();

                // load a resource
                loader.load(

                    // resource URL - change json format to js
                    'toilette.js', //Created by Ieva Lickiene, www.meandmy3d.com

                    // Function when resource is loaded
                    function ( geometry, materials ) {

                        //var material = materials[ 0 ];
                        // var material = new THREE.MeshBasicMaterial({color: 0xff0000});
                        material = new THREE.MeshLambertMaterial({morphTargets : true, color:0x7a7a7a });

                        // group = new THREE.Group();
                        // var toilette1 = new THREE.Mesh( geometry, material );
                        //     toilette1.position.set( 1, 1, 1 );
                        //     toilette1.rotation.x = Math.random() * 2;
                        //     toilette1.rotation.y = Math.random() * 2;
                        //     toilette1.rotation.z = Math.random() * 2;
                        //     scene.add( toilette1 );


                        // toilette2 = new THREE.Mesh( geometry, material );
                        //     toilette2.position.set( Math.random(), Math.random(), Math.random());
                        //     toilette2.rotation.x = Math.random() * 2;
                        //     toilette2.rotation.y = Math.random() * 2;
                        //     toilette2.rotation.z = Math.random() * 2;
                            // scene.add( toilette2 );

                        for (i = 0; i < 10; i++) { 
                            toilette[i] = new THREE.Mesh( geometry, material );
                            toilette[i].position.set( Math.random(), Math.random(), Math.random());
                            toilette[i].rotation.x = Math.random() * 2;
                            toilette[i].rotation.y = Math.random() * 2;
                            toilette[i].rotation.z = Math.random() * 2;

                              }
                            })   
                            // group.add( mesh );
                              
                            // scene.add( group );
                            // scene.add( mesh );


                        // scene.add( material );

                        // var object = new THREE.Mesh( geometry, material );
                        console.log(geometry)
                        // scene.add( object );

                        
                    
                // lights
                var ambientLight = new THREE.AmbientLight( 0xcccccc );
                scene.add( ambientLight );
                var pointLight = new THREE.PointLight( 0xffffff, 5, 10 );
                pointLight.position.set( 0, 5, 0 );
                scene.add( pointLight )

                // renderer
                renderer = new THREE.WebGLRenderer();
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );

                // events
                window.addEventListener( 'resize', onWindowResize, false );
                // document.addEventListener( 'mousemove',  onDocumentMouseMove, false );
                // document.addEventListener( 'mousemove',  onDocumentMouseMove, false );
                window.addEventListener( 'click', mousePressed, false);
           }
            //
         function onWindowResize() {
         
            //camera.aspect = window.innerWidth / window.innerHeight;
            // camera.updateProjectionMatrix();
            renderer.setSize( window.innerWidth, window.innerHeight );
 }

        // function onDocumentMouseMove(event) {
        //  mouseX = ( event.clientX - windowHalfX );
        //  mouseY = ( event.clientY - windowHalfY ); 
        // }


            function mousePressed(evt) {
            console.log("changing background");
            // scene.background = new THREE.Color( 0Xc465e5 );
            // scene.add( toilette2 );
            // scene.add( toilette[evt] );
            scene.add( toilette[2] );
}


            //
            function animate() {
                requestAnimationFrame( animate );
                render();
            }
            function render() {
                camera.position.x = 4;
                camera.position.y = 4;
                camera.position.y = 4;

                //making the toilette go in spirals
                // camera.position.z = 4;
                // camera.position.x = mouseX;
                // camera.position.y = mouseY;
                // mixer.update( getDelta() );
                camera.lookAt( scene.position );
                renderer.render( scene, camera );
            }
        </script>
    </body>
</html>